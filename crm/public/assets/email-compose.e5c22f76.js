var V=Object.defineProperty,Z=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var M=(t,e,o)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,v=(t,e)=>{for(var o in e||(e={}))X.call(e,o)&&M(t,o,e[o]);if(k)for(var o of k(e))G.call(e,o)&&M(t,o,e[o]);return t},T=(t,e)=>Z(t,J(e));import{O as x,aD as ee,g as L,v as I,r as p,j as r,L as te,h as b,F as A,B as S,P as ne,o as D,aa as oe,aE as ae}from"./vendor.99654bca.js";import{A as _}from"./index.4054faf5.js";import{c as C}from"./controllers.5aba4075.js";import{c as E,L as re}from"./index.5d4b226f.js";import{I as se}from"./InboxOutlined.f1a5c4c0.js";import{g as ie}from"./contact.get.6eef5b66.js";import"./var.env.093c0205.js";const O={okText:"Agree",cancelText:"Abort",closable:!0,content:"",onOk:()=>console.log("ok"),onCancel:()=>console.log("canceled")},ce=(t="",e)=>T(v({},O),{content:t,onOk:e,onCancel:x.destroyAll}),le=(t="",e)=>T(v({},O),{content:t,onOk:e}),P=(t="Notification",e="")=>{ee.open({type:"success",message:t,description:e,onClick:()=>{console.log("Notification Clicked!")}})},{EMAIL_TEMPLATE:de}=C,pe=async({id:t,design:e})=>{const{instance:o}=new _,{data:n}=await o.patch(`${de}/${t}`,{design:e});return n},ue=()=>L(pe),{EMAIL_TEMPLATE:H}=C,h="fetch-templates",me=async(t="")=>{const{instance:e}=new _,{data:o}=await e.get(`${H}/${t}`);return o.data},R=async()=>{const{instance:t}=new _,{data:e}=await t.get(`${H}`);return e.data},fe=()=>I(h,R),{EMAIL_TEMPLATE:he}=C,ge=async({design:t,name:e})=>{const{instance:o}=new _,{data:n}=await o.post(`${he}`,{name:e,design:t});return n},ye=()=>L(ge,{onMutate:async t=>{await E.cancelQueries(h);const e=E.getQueryData(h);if(e)return E.setQueryData(h,[...e,T(v({},t),{id:Date.now().toString()})]),{previousItems:e};{const o=[T(v({},t),{id:Date.now().toString()})];return E.setQueryData(h,o),{previousItems:o}}},onError:(t,e,o)=>{(o==null?void 0:o.previousItems)&&E.setQueryData(h,o.previousItems)},onSettled:()=>{E.invalidateQueries(h)}}),ve=({design:t,onClose:e})=>{const[o,n]=p.exports.useState(!1),{data:a,isLoading:s}=fe(),i=ue(),{mutate:c}=ye(),m=()=>n(!o),[g,u]=p.exports.useState("");if(s)return r(te,{type:"cubes"});const w=l=>{l.key==="Enter"&&(n(!1),c({design:t,name:g}),u(""),e())},y=l=>{n(!1),i.mutate({id:l,design:t})};return b("div",{children:[a&&a.length>0?b(A,{children:[r("h3",{children:"Available templates"}),r("ul",{style:{transform:"translateX(-20px)"},children:a.map((l,f)=>r("li",{style:{cursor:"pointer"},onClick:()=>{o||(e(),y(l.id||""))},children:l.name},f))})]}):b("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[r(se,{style:{fontSize:60,color:"rgba(0,0,0,0.35)"}}),r("p",{style:{fontWeight:"bold",color:"rgba(0,0,0,0.6)"},children:"There's no template"})]}),b("div",{children:[r(S,{style:{display:o?"none":"block"},type:"link",onClick:m,icon:r(ne,{}),children:"Save as"}),o&&r(D,{suffix:r(S,{icon:r(oe,{}),type:"link",onClick:m}),onKeyDown:w,onChange:l=>u(l.target.value),placeholder:"Basic usage"})]})]})},be=({modal:t,templates:e,handleLoad:o,setModal:n,design:a})=>{const s=()=>{n(""),P("success","Your email have updated successfully")};return b("div",{children:[r(x,{title:"Your templates...",visible:t==="selectTemplate",onCancel:()=>n("false"),children:e.map(i=>r("p",{style:{cursor:"pointer"},onClick:()=>{o((i==null?void 0:i.id)||""),n("false")},children:i.name},i.id))}),r(x,{title:"Save your template",visible:t==="saveTemplate",onCancel:()=>n("false"),children:r(ve,{design:a,onClose:s})})]})},Ee=(t,e)=>{const[o,n]=p.exports.useState(t);return p.exports.useEffect(()=>{const a=setTimeout(()=>{n(t)},e);return()=>{clearTimeout(a)}},[t,e]),o},{MAILER:we}=C,Te=async t=>{const{instance:e}=new _,{data:o}=await e.post(`${we}/send`,v({},t));return o},xe=t=>L(Te,{onError:()=>t()});var Se="//editor.unlayer.com/embed.js?2",$=[],B=!1,_e=function(e){var o=document.querySelectorAll("script"),n=!1;return o.forEach(function(a){a.src.includes(e)&&(n=!0)}),n},Ce=function(e){$.push(e)},q=function(){if(B)for(var e=void 0;e=$.shift();)e()},Le=function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;if(Ce(e),_e(o))q();else{var n=document.createElement("script");n.setAttribute("src",o),n.onload=function(){B=!0,q()},document.head.appendChild(n)}};const je=[["react-email-editor@1.5.0","F:\\Capstone\\monorepo\\client"]],ke="react-email-editor@1.5.0",Me="react-email-editor@1.5.0",Ie=!1,Ae="sha512-81+tVkLJZUaezXIKZdMAg631mMORaDkqrj0Ud6hHpYtLfdz1v1gFRiAsehvvh44+7J/LmzWacavZ5HtM1qaINw==",De="/react-email-editor",Oe={},Pe={type:"version",registry:!0,raw:"react-email-editor@1.5.0",name:"react-email-editor",escapedName:"react-email-editor",rawSpec:"1.5.0",saveSpec:null,fetchSpec:"1.5.0"},He=["/"],Re="https://registry.npmjs.org/react-email-editor/-/react-email-editor-1.5.0.tgz",$e="1.5.0",Be="F:\\Capstone\\monorepo\\client",qe="",Fe={url:"https://github.com/unlayer/react-email-editor/issues"},Ue={},Ne="Unlayer's Email Editor Component for React.js",Qe={nwb:"^0.22.0",react:"^16.13.1","react-dom":"^16.13.1","react-router-dom":"^5.2.0","styled-components":"^4.2.0"},Ke=["css","es","lib","umd"],ze="https://github.com/unlayer/react-email-editor#readme",We=["react-component"],Ye="MIT",Ve="lib/index.js",Ze="es/index.js",Je="react-email-editor",Xe={react:"15.x || 16.x"},Ge={type:"git",url:"git+https://github.com/unlayer/react-email-editor.git"},et={build:"nwb build-react-component",clean:"nwb clean-module && nwb clean-demo",release:"npm run build && npm publish",start:"nwb serve-react-demo",test:"nwb test-react","test:coverage":"nwb test-react --coverage","test:watch":"nwb test-react --server"},tt="1.5.0";var F={_args:je,_from:ke,_id:Me,_inBundle:Ie,_integrity:Ae,_location:De,_phantomChildren:Oe,_requested:Pe,_requiredBy:He,_resolved:Re,_spec:$e,_where:Be,author:qe,bugs:Fe,dependencies:Ue,description:Ne,devDependencies:Qe,files:Ke,homepage:ze,keywords:We,license:Ye,main:Ve,module:Ze,name:Je,peerDependencies:Xe,repository:Ge,scripts:et,version:tt},U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t};function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ot(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function at(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var rt=0,st=function(t){at(e,t);function e(o){nt(this,e);var n=ot(this,t.call(this,o));return n.loadEditor=function(){var a=n.props.options||{};n.props.projectId&&(a.projectId=n.props.projectId),n.props.tools&&(a.tools=n.props.tools),n.props.appearance&&(a.appearance=n.props.appearance),n.props.locale&&(a.locale=n.props.locale),n.editor=unlayer.createEditor(U({},a,{id:n.editorId,displayMode:"email",source:{name:F.name,version:F.version}}));for(var s=Object.entries(n.props),i=Array.isArray(s),c=0,s=i?s:s[Symbol.iterator]();;){var m;if(i){if(c>=s.length)break;m=s[c++]}else{if(c=s.next(),c.done)break;m=c.value}var g=m,u=g[0],w=g[1];/^on/.test(u)&&u!=="onLoad"&&u!=="onReady"&&n.addEventListener(u,w)}var y=n.props,l=y.onLoad,f=y.onReady;l&&l(),f&&n.editor.addEventListener("editor:ready",f)},n.registerCallback=function(a,s){n.editor.registerCallback(a,s)},n.addEventListener=function(a,s){n.editor.addEventListener(a,s)},n.loadDesign=function(a){n.editor.loadDesign(a)},n.saveDesign=function(a){n.editor.saveDesign(a)},n.exportHtml=function(a){n.editor.exportHtml(a)},n.setMergeTags=function(a){n.editor.setMergeTags(a)},n.editorId=o.editorId||"editor-"+ ++rt,n}return e.prototype.componentDidMount=function(){Le(this.loadEditor,this.props.scriptUrl)},e.prototype.render=function(){var n=this.props,a=n.minHeight,s=a===void 0?500:a,i=n.style,c=i===void 0?{}:i;return r("div",{style:{flex:1,display:"flex",minHeight:s},children:r("div",{id:this.editorId,style:U({},c,{flex:1})})})},e}(p.exports.Component);const vt=()=>{const[t,e]=p.exports.useState(void 0),o=Ee(t,500),{data:n}=I(["query-contact-like-email",o],()=>ie(o),{enabled:Boolean(o)}),a=p.exports.useRef(null),[s,i]=p.exports.useState([]),[c,m]=p.exports.useState(""),[g,u]=p.exports.useState(),[w,y]=p.exports.useState(""),[l,f]=p.exports.useState(""),[j,N]=x.useModal(),Q=()=>{j.error(ce("cannot send email",x.destroyAll))},{mutate:K,isLoading:z}=xe(Q),W=()=>{a.current&&a.current.exportHtml(d=>{K({subject:w,to:c,value:d.html})})};return b(A,{children:[r(be,{templates:s,modal:l,handleLoad:async d=>{if(!a.current)return;const Y=await me(d);a.current.loadDesign(Y.design),P("Notification","Email template have been loaded successfully")},setModal:f,design:g}),r(ae,{style:{width:"100%"},onChange:d=>{e(d),m(d)},placeholder:"To",notFoundContent:r(re,{coverWidth:"100%",coverHeight:180,loadingHeight:40,loadingWidth:40}),dataSource:n,filterOption:()=>!0}),r(D,{placeholder:"Email subject",onChange:d=>y(d.target.value),type:"email"}),r(st,{ref:a,options:{customCSS:["https://examples.unlayer.com/examples/custom-css/custom.css"]},appearance:{theme:"light"}}),r(S,{onClick:()=>{!a.current||a.current.saveDesign(d=>{u(d),f("saveTemplate")})},style:{marginRight:12},type:"primary",danger:!0,children:"Save"}),r(S,{onClick:async()=>{const d=await R();i(d),f("selectTemplate")},style:{marginRight:12},type:"primary",danger:!0,children:"Load"}),r(S,{style:{marginRight:12},onClick:()=>{j.warning(le(`this email will be sent to ${c}`,W))},type:"primary",danger:!0,disabled:c.length>0,loading:z,children:"Send"}),N]})};export{vt as default};
