var F=Object.defineProperty,z=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var M=(t,e,o)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,b=(t,e)=>{for(var o in e||(e={}))Y.call(e,o)&&M(t,o,e[o]);if(k)for(var o of k(e))Z.call(e,o)&&M(t,o,e[o]);return t},T=(t,e)=>z(t,K(e));import{K as x,aE as J,h as C,i as W,r as u,j as a,L as X,k as E,F as I,B as _,P as G,q as L,a8 as V}from"./vendor.49e4a54c.js";import{A as S}from"./index.12d89f27.js";import{c as j}from"./controllers.5aba4075.js";import{c as w}from"./index.2770d965.js";import{I as ee}from"./InboxOutlined.504f27e4.js";import"./var.env.093c0205.js";const A={okText:"Agree",cancelText:"Abort",closable:!0,content:"",onOk:()=>console.log("ok"),onCancel:()=>console.log("canceled")},te=(t="",e)=>T(b({},A),{content:t,onOk:e,onCancel:x.destroyAll}),ne=(t="",e)=>T(b({},A),{content:t,onOk:e}),D=(t="Notification",e="")=>{J.open({type:"success",message:t,description:e,onClick:()=>{console.log("Notification Clicked!")}})},{EMAIL_TEMPLATE:oe}=j,re=async({id:t,design:e})=>{const{instance:o}=new S,{data:n}=await o.patch(`${oe}/${t}`,{design:e});return n},ae=()=>C(re),{EMAIL_TEMPLATE:O}=j,f="fetch-templates",se=async(t="")=>{const{instance:e}=new S,{data:o}=await e.get(`${O}/${t}`);return o.data},P=async()=>{const{instance:t}=new S,{data:e}=await t.get(`${O}`);return e.data},ie=()=>W(f,P),{EMAIL_TEMPLATE:ce}=j,le=async({design:t,name:e})=>{const{instance:o}=new S,{data:n}=await o.post(`${ce}`,{name:e,design:t});return n},de=()=>C(le,{onMutate:async t=>{await w.cancelQueries(f);const e=w.getQueryData(f);if(e)return w.setQueryData(f,[...e,T(b({},t),{id:Date.now().toString()})]),{previousItems:e};{const o=[T(b({},t),{id:Date.now().toString()})];return w.setQueryData(f,o),{previousItems:o}}},onError:(t,e,o)=>{(o==null?void 0:o.previousItems)&&w.setQueryData(f,o.previousItems)},onSettled:()=>{w.invalidateQueries(f)}}),pe=({design:t,onClose:e})=>{const[o,n]=u.exports.useState(!1),{data:r,isLoading:s}=ie(),i=ae(),{mutate:l}=de(),m=()=>n(!o),[h,d]=u.exports.useState("");if(s)return a(X,{type:"cubes"});const g=c=>{c.key==="Enter"&&(n(!1),l({design:t,name:h}),d(""),e())},y=c=>{n(!1),i.mutate({id:c,design:t})};return E("div",{children:[r&&r.length>0?E(I,{children:[a("h3",{children:"Available templates"}),a("ul",{style:{transform:"translateX(-20px)"},children:r.map((c,v)=>a("li",{style:{cursor:"pointer"},onClick:()=>{o||(e(),y(c.id||""))},children:c.name},v))})]}):E("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[a(ee,{style:{fontSize:60,color:"rgba(0,0,0,0.35)"}}),a("p",{style:{fontWeight:"bold",color:"rgba(0,0,0,0.6)"},children:"There's no template"})]}),E("div",{children:[a(_,{style:{display:o?"none":"block"},type:"link",onClick:m,icon:a(G,{}),children:"Save as"}),o&&a(L,{suffix:a(_,{icon:a(V,{}),type:"link",onClick:m}),onKeyDown:g,onChange:c=>d(c.target.value),placeholder:"Basic usage"})]})]})},ue=({modal:t,templates:e,handleLoad:o,setModal:n,design:r})=>{const s=()=>{n(""),D("success","Your email have updated successfully")};return E("div",{children:[a(x,{title:"Your templates...",visible:t==="selectTemplate",onCancel:()=>n("false"),children:e.map(i=>a("p",{style:{cursor:"pointer"},onClick:()=>{o((i==null?void 0:i.id)||""),n("false")},children:i.name},i.id))}),a(x,{title:"Save your template",visible:t==="saveTemplate",onCancel:()=>n("false"),children:a(pe,{design:r,onClose:s})})]})},{MAILER:me}=j,fe=async t=>{const{instance:e}=new S,{data:o}=await e.post(`${me}/send`,b({},t));return o},he=t=>C(fe,{onError:()=>t()});var ge="//editor.unlayer.com/embed.js?2",R=[],$=!1,ye=function(e){var o=document.querySelectorAll("script"),n=!1;return o.forEach(function(r){r.src.includes(e)&&(n=!0)}),n},ve=function(e){R.push(e)},H=function(){if($)for(var e=void 0;e=R.shift();)e()},be=function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ge;if(ve(e),ye(o))H();else{var n=document.createElement("script");n.setAttribute("src",o),n.onload=function(){$=!0,H()},document.head.appendChild(n)}};const Ee=[["react-email-editor@1.5.0","F:\\Capstone\\monorepo\\client"]],we="react-email-editor@1.5.0",Te="react-email-editor@1.5.0",xe=!1,_e="sha512-81+tVkLJZUaezXIKZdMAg631mMORaDkqrj0Ud6hHpYtLfdz1v1gFRiAsehvvh44+7J/LmzWacavZ5HtM1qaINw==",Se="/react-email-editor",je={},Ce={type:"version",registry:!0,raw:"react-email-editor@1.5.0",name:"react-email-editor",escapedName:"react-email-editor",rawSpec:"1.5.0",saveSpec:null,fetchSpec:"1.5.0"},Le=["/"],ke="https://registry.npmjs.org/react-email-editor/-/react-email-editor-1.5.0.tgz",Me="1.5.0",Ie="F:\\Capstone\\monorepo\\client",Ae="",De={url:"https://github.com/unlayer/react-email-editor/issues"},Oe={},Pe="Unlayer's Email Editor Component for React.js",Re={nwb:"^0.22.0",react:"^16.13.1","react-dom":"^16.13.1","react-router-dom":"^5.2.0","styled-components":"^4.2.0"},$e=["css","es","lib","umd"],He="https://github.com/unlayer/react-email-editor#readme",qe=["react-component"],Be="MIT",Ue="lib/index.js",Ne="es/index.js",Qe="react-email-editor",Fe={react:"15.x || 16.x"},ze={type:"git",url:"git+https://github.com/unlayer/react-email-editor.git"},Ke={build:"nwb build-react-component",clean:"nwb clean-module && nwb clean-demo",release:"npm run build && npm publish",start:"nwb serve-react-demo",test:"nwb test-react","test:coverage":"nwb test-react --coverage","test:watch":"nwb test-react --server"},Ye="1.5.0";var q={_args:Ee,_from:we,_id:Te,_inBundle:xe,_integrity:_e,_location:Se,_phantomChildren:je,_requested:Ce,_requiredBy:Le,_resolved:ke,_spec:Me,_where:Ie,author:Ae,bugs:De,dependencies:Oe,description:Pe,devDependencies:Re,files:$e,homepage:He,keywords:qe,license:Be,main:Ue,module:Ne,name:Qe,peerDependencies:Fe,repository:ze,scripts:Ke,version:Ye},B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t};function Ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Je(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function We(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Xe=0,Ge=function(t){We(e,t);function e(o){Ze(this,e);var n=Je(this,t.call(this,o));return n.loadEditor=function(){var r=n.props.options||{};n.props.projectId&&(r.projectId=n.props.projectId),n.props.tools&&(r.tools=n.props.tools),n.props.appearance&&(r.appearance=n.props.appearance),n.props.locale&&(r.locale=n.props.locale),n.editor=unlayer.createEditor(B({},r,{id:n.editorId,displayMode:"email",source:{name:q.name,version:q.version}}));for(var s=Object.entries(n.props),i=Array.isArray(s),l=0,s=i?s:s[Symbol.iterator]();;){var m;if(i){if(l>=s.length)break;m=s[l++]}else{if(l=s.next(),l.done)break;m=l.value}var h=m,d=h[0],g=h[1];/^on/.test(d)&&d!=="onLoad"&&d!=="onReady"&&n.addEventListener(d,g)}var y=n.props,c=y.onLoad,v=y.onReady;c&&c(),v&&n.editor.addEventListener("editor:ready",v)},n.registerCallback=function(r,s){n.editor.registerCallback(r,s)},n.addEventListener=function(r,s){n.editor.addEventListener(r,s)},n.loadDesign=function(r){n.editor.loadDesign(r)},n.saveDesign=function(r){n.editor.saveDesign(r)},n.exportHtml=function(r){n.editor.exportHtml(r)},n.setMergeTags=function(r){n.editor.setMergeTags(r)},n.editorId=o.editorId||"editor-"+ ++Xe,n}return e.prototype.componentDidMount=function(){be(this.loadEditor,this.props.scriptUrl)},e.prototype.render=function(){var n=this.props,r=n.minHeight,s=r===void 0?500:r,i=n.style,l=i===void 0?{}:i;return a("div",{style:{flex:1,display:"flex",minHeight:s},children:a("div",{id:this.editorId,style:B({},l,{flex:1})})})},e}(u.exports.Component);const lt=()=>{const t=u.exports.useRef(null),[e,o]=u.exports.useState([]),[n,r]=u.exports.useState(""),[s,i]=u.exports.useState(),[l,m]=u.exports.useState(""),[h,d]=u.exports.useState(""),[g,y]=x.useModal(),c=()=>{g.error(te("cannot send email",x.destroyAll))},{mutate:v,isLoading:U}=he(c),N=()=>{t.current&&t.current.exportHtml(p=>{v({subject:l,to:n,value:p.html})})};return E(I,{children:[a(ue,{templates:e,modal:h,handleLoad:async p=>{if(!t.current)return;const Q=await se(p);t.current.loadDesign(Q.design),D("Notification","Email template have been loaded successfully")},setModal:d,design:s}),a(L,{placeholder:"to",onChange:p=>r(p.target.value)}),a(L,{placeholder:"Email subject",onChange:p=>m(p.target.value),type:"email"}),a(Ge,{ref:t,options:{customCSS:["https://examples.unlayer.com/examples/custom-css/custom.css"]},appearance:{theme:"light"}}),a(_,{onClick:()=>{!t.current||t.current.saveDesign(p=>{i(p),d("saveTemplate")})},style:{marginRight:12},type:"primary",danger:!0,children:"Save"}),a(_,{onClick:async()=>{const p=await P();o(p),d("selectTemplate")},style:{marginRight:12},type:"primary",danger:!0,children:"Load"}),a(_,{style:{marginRight:12},onClick:()=>{g.warning(ne(`this email will be sent to ${n}`,N))},type:"primary",danger:!0,disabled:n.length>0,loading:U,children:"Send"}),y]})};export{lt as default};
