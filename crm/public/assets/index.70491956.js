var br=Object.defineProperty;var _r=(t,e,n)=>e in t?br(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var En=(t,e,n)=>(_r(t,typeof e!="symbol"?e+"":e,n),n);import{j as R,R as wr,B as Er,r as Y,C as xr,L as Cr,Q as xn,u as Ar,a as Cn,d as Sr,b as Kr,c as Dr,e as kr,E as Pr,f as Tr,g as Ir}from"./vendor.1ad7f0a1.js";const Rr=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};Rr();const Br=()=>R(wr,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:R(Er,{type:"primary",shape:"round",children:R("a",{href:"/",children:"Back To Home"})})}),Or=({error:t})=>t.message=="Unauthorize"?R(Br,{}):R("div",{children:"Error occur"});const Mr="modulepreload",An={},Fr="/",ne=function(e,n){return!n||n.length===0?e():Promise.all(n.map(r=>{if(r=`${Fr}${r}`,r in An)return;An[r]=!0;const i=r.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${a}`))return;const o=document.createElement("link");if(o.rel=i?"stylesheet":Mr,i||(o.as="script",o.crossOrigin=""),o.href=r,document.head.appendChild(o),i)return new Promise((u,s)=>{o.addEventListener("load",u),o.addEventListener("error",s)})})).then(()=>e())},jr=Y.exports.lazy(()=>ne(()=>import("./contact.bd2f928a.js"),["assets/contact.bd2f928a.js","assets/Column.97809707.js","assets/vendor.1ad7f0a1.js","assets/index.b5e86368.js","assets/FilterOutlined.c63ec88d.js"])),Lr=Y.exports.lazy(()=>ne(()=>import("./home.daed8d48.js"),["assets/home.daed8d48.js","assets/createLoading.90329f69.js","assets/index.b32299cc.js","assets/vendor.1ad7f0a1.js","assets/tslib.es6.c3ae133c.js","assets/controllers.5aba4075.js","assets/MoreOutlined.135ce470.js"])),Nr=Y.exports.lazy(()=>ne(()=>import("./pipeline.be1fbe97.js"),["assets/pipeline.be1fbe97.js","assets/wrapper-row-title.eebc7970.js","assets/vendor.1ad7f0a1.js","assets/index.b5e86368.js","assets/FilterOutlined.c63ec88d.js","assets/MoreOutlined.135ce470.js","assets/useToggle.735e628a.js","assets/index.25619e45.js","assets/controllers.5aba4075.js"])),Vr=Y.exports.lazy(()=>ne(()=>import("./login.d2ca64ff.js"),["assets/login.d2ca64ff.js","assets/index.25619e45.js","assets/vendor.1ad7f0a1.js","assets/index.b32299cc.js","assets/motion.cf8501c5.js","assets/tslib.es6.c3ae133c.js","assets/type-roles.2fad0a38.js","assets/controllers.5aba4075.js"])),zr=Y.exports.lazy(()=>ne(()=>import("./admin.47aff523.js"),["assets/admin.47aff523.js","assets/vendor.1ad7f0a1.js","assets/UserOutlined.4fe85411.js","assets/index.b5e86368.js","assets/wrapper-row-title.eebc7970.js","assets/createLoading.90329f69.js","assets/index.b32299cc.js","assets/tslib.es6.c3ae133c.js","assets/Column.97809707.js","assets/MoreOutlined.135ce470.js"])),Ur=Y.exports.lazy(()=>ne(()=>import("./signup.3392d9bb.js"),["assets/signup.3392d9bb.js","assets/vendor.1ad7f0a1.js","assets/motion.cf8501c5.js","assets/tslib.es6.c3ae133c.js"])),Wr=Y.exports.lazy(()=>ne(()=>import("./user-layout.ddd89354.js"),["assets/user-layout.ddd89354.js","assets/vendor.1ad7f0a1.js","assets/UserOutlined.4fe85411.js","assets/type-roles.2fad0a38.js","assets/motion.cf8501c5.js","assets/tslib.es6.c3ae133c.js","assets/useToggle.735e628a.js"])),Hr=Y.exports.lazy(()=>ne(()=>import("./setting.0bdc84f4.js"),["assets/setting.0bdc84f4.js","assets/vendor.1ad7f0a1.js"])),Yr=Y.exports.lazy(()=>ne(()=>import("./admin.47aff523.js"),["assets/admin.47aff523.js","assets/vendor.1ad7f0a1.js","assets/UserOutlined.4fe85411.js","assets/index.b5e86368.js","assets/wrapper-row-title.eebc7970.js","assets/createLoading.90329f69.js","assets/index.b32299cc.js","assets/tslib.es6.c3ae133c.js","assets/Column.97809707.js","assets/MoreOutlined.135ce470.js"])),Gr=Y.exports.lazy(()=>ne(()=>import("./email-compose.4709fa39.js"),["assets/email-compose.4709fa39.js","assets/vendor.1ad7f0a1.js","assets/index.25619e45.js","assets/controllers.5aba4075.js"])),Qr=[{path:"/login",element:R(Vr,{})},{path:"/signup",element:R(Ur,{})},{path:"/",element:R(Wr,{}),children:[{index:!0,element:R(Lr,{})},{path:"contact",element:R(jr,{})},{path:"pipeline",element:R(Nr,{})},{path:"email",element:R(Gr,{})},{path:"account",element:R(Hr,{})}]},{path:"/administration",element:R(Yr,{}),children:[{index:!0,element:R(zr,{})}]},{path:"/*",element:R("h1",{children:"Page not found"})}],Xr="#FF5351",$r="#3a1110",qr="#E4E4E7",Jr="#0c9f77",Zr="#fd4358",ei="1px solid rgba(0, 0, 0, 0.05)",ti="-2px 3px 3px 1px rgba(0, 0, 0, 0.05)";var pe={primaryColor:Xr,primaryTextColor:$r,darkGreyBackgroundColor:qr,percentColorIncrease:Jr,percentColorDecrease:Zr,cardBorder:ei,boxShadowCardDashBoard:ti};const Ua={primaryColor:pe.primaryColor,primaryTextColor:pe.primaryTextColor,darkGreyBackgroundColor:pe.darkGreyBackgroundColor,percentColorIncrease:pe.percentColorIncrease,percentColorDecrease:pe.percentColorDecrease,cardBorder:pe.cardBorder,boxShadowCardDashBoard:pe.boxShadowCardDashBoard};xr.config({theme:{primaryColor:pe.primaryColor}});const ni=()=>R("div",{style:{height:"100vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center"},children:R(Cr,{type:"spin",color:"red",height:75,width:75})}),ri=new xn;function ii(){const t=Ar(Qr);return R(Cn,{client:ri,children:R(Y.exports.Suspense,{fallback:R(ni,{}),children:R("div",{className:"App",children:t})})})}let ai=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let r=n[t]&63;r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r<63?e+="_":e+="-"}return e};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T=function(){return T=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},T.apply(this,arguments)};function Kt(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var F=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,L=Object.keys,z=Array.isArray;typeof Promise!="undefined"&&!F.Promise&&(F.Promise=Promise);function W(t,e){return typeof e!="object"||L(e).forEach(function(n){t[n]=e[n]}),t}var je=Object.getPrototypeOf,oi={}.hasOwnProperty;function $(t,e){return oi.call(t,e)}function De(t,e){typeof e=="function"&&(e=e(je(t))),(typeof Reflect=="undefined"?L:Reflect.ownKeys)(e).forEach(function(n){ae(t,n,e[n])})}var Sn=Object.defineProperty;function ae(t,e,n,r){Sn(t,e,W(n&&$(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function ke(t){return{from:function(e){return t.prototype=Object.create(e.prototype),ae(t.prototype,"constructor",t),{extend:De.bind(null,t.prototype)}}}}var ui=Object.getOwnPropertyDescriptor;function Dt(t,e){var n=ui(t,e),r;return n||(r=je(t))&&Dt(r,e)}var si=[].slice;function rt(t,e,n){return si.call(t,e,n)}function Kn(t,e){return e(t)}function Le(t){if(!t)throw new Error("Assertion Failed")}function Dn(t){F.setImmediate?setImmediate(t):setTimeout(t,0)}function kn(t,e){return t.reduce(function(n,r,i){var a=e(r,i);return a&&(n[a[0]]=a[1]),n},{})}function ci(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function oe(t,e){if($(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var a=oe(t,e[r]);n.push(a)}return n}var o=e.indexOf(".");if(o!==-1){var u=t[e.substr(0,o)];return u===void 0?void 0:oe(u,e.substr(o+1))}}function Z(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){Le(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)Z(t,e[r],n[r])}else{var a=e.indexOf(".");if(a!==-1){var o=e.substr(0,a),u=e.substr(a+1);if(u==="")n===void 0?z(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var s=t[o];s||(s=t[o]={}),Z(s,u,n)}}else n===void 0?z(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function li(t,e){typeof e=="string"?Z(t,e,void 0):"length"in e&&[].map.call(e,function(n){Z(t,n,void 0)})}function Pn(t){var e={};for(var n in t)$(t,n)&&(e[n]=t[n]);return e}var fi=[].concat;function Tn(t){return fi.apply([],t)}var In="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Tn([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return F[t]}),hi=In.map(function(t){return F[t]});kn(In,function(t){return[t,!0]});var ve=null;function Ne(t){ve=typeof WeakMap!="undefined"&&new WeakMap;var e=kt(t);return ve=null,e}function kt(t){if(!t||typeof t!="object")return t;var e=ve&&ve.get(t);if(e)return e;if(z(t)){e=[],ve&&ve.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(kt(t[n]))}else if(hi.indexOf(t.constructor)>=0)e=t;else{var i=je(t);e=i===Object.prototype?{}:Object.create(i),ve&&ve.set(t,e);for(var a in t)$(t,a)&&(e[a]=kt(t[a]))}return e}var di={}.toString;function Pt(t){return di.call(t).slice(8,-1)}var Tt=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",pi=typeof Tt=="symbol"?function(t){var e;return t!=null&&(e=t[Tt])&&e.apply(t)}:function(){return null},Pe={};function ue(t){var e,n,r,i;if(arguments.length===1){if(z(t))return t.slice();if(this===Pe&&typeof t=="string")return[t];if(i=pi(t)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var It=typeof Symbol!="undefined"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},re=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Rn(t,e){re=t,Bn=e}var Bn=function(){return!0},vi=!new Error("").stack;function we(){if(vi)try{throw we.arguments,new Error}catch(t){return t}return new Error}function Rt(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Bn).map(function(r){return`
`+r}).join("")):""}var yi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],On=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Bt=yi.concat(On),mi={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Te(t,e){this._e=we(),this.name=t,this.message=e}ke(Te).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Rt(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Mn(t,e){return t+". Errors: "+Object.keys(e).map(function(n){return e[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function it(t,e,n,r){this._e=we(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Mn(t,e)}ke(it).from(Te);function Ve(t,e){this._e=we(),this.name="BulkError",this.failures=Object.keys(e).map(function(n){return e[n]}),this.failuresByPos=e,this.message=Mn(t,e)}ke(Ve).from(Te);var gi=Bt.reduce(function(t,e){return t[e]=e+"Error",t},{}),bi=Te,D=Bt.reduce(function(t,e){var n=e+"Error";function r(i,a){this._e=we(),this.name=n,i?typeof i=="string"?(this.message=""+i+(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=mi[e]||n,this.inner=null)}return ke(r).from(bi),t[e]=r,t},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var Fn=On.reduce(function(t,e){return t[e+"Error"]=D[e],t},{});function _i(t,e){if(!t||t instanceof Te||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Fn[t.name])return t;var n=new Fn[t.name](e||t.message,t);return"stack"in t&&ae(n,"stack",{get:function(){return this.inner.stack}}),n}var at=Bt.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=D[e]),t},{});at.ModifyError=it;at.DexieError=Te;at.BulkError=Ve;function M(){}function ze(t){return t}function wi(t,e){return t==null||t===ze?e:function(n){return e(t(n))}}function Ee(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Ei(t,e){return t===M?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ee(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ee(i,this.onerror):i),a!==void 0?a:n}}function xi(t,e){return t===M?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ee(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ee(r,this.onerror):r)}}function Ci(t,e){return t===M?e:function(n){var r=t.apply(this,arguments);W(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ee(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Ee(a,this.onerror):a),r===void 0?o===void 0?void 0:o:W(r,o)}}function Ai(t,e){return t===M?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function Ot(t,e){return t===M?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return e.apply(r,a)})}return e.apply(this,arguments)}}var Ue={},Si=100,Ki=20,jn=100,Mt=typeof Promise=="undefined"?[]:function(){var t=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[t,je(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,je(e),t]}(),Ft=Mt[0],ot=Mt[1],jt=Mt[2],Ln=ot&&ot.then,ut=Ft&&Ft.constructor,Lt=!!jt,Nt=!1,Di=jt?function(){jt.then(ft)}:F.setImmediate?setImmediate.bind(null,ft):F.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){ft(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(ft,0)},We=function(t,e){He.push([t,e]),st&&(Di(),st=!1)},Vt=!0,st=!0,xe=[],ct=[],zt=null,Ut=ze,Ie={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Xn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{Xn(t[0],t[1])}catch{}})}},A=Ie,He=[],Ce=0,lt=[];function C(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=M,this._lib=!1;var e=this._PSD=A;if(re&&(this._stackHolder=we(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Ue)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Ht(this,this._value);return}this._state=null,this._value=null,++e.ref,Vn(this,t)}var Wt={get:function(){var t=A,e=pt;function n(r,i){var a=this,o=!t.global&&(t!==A||e!==pt),u=o&&!se(),s=new C(function(c,f){Yt(a,new Nn(yt(r,t,o,u),yt(i,t,o,u),c,f,t))});return re&&Wn(s,this),s}return n.prototype=Ue,n},set:function(t){ae(this,"then",t&&t.prototype===Ue?Wt:{get:function(){return t},set:Wt.set})}};De(C.prototype,{then:Wt,_then:function(t,e){Yt(this,new Nn(null,null,t,e,A))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,function(r){return r instanceof e?n(r):ht(r)}):this.then(null,function(r){return r&&r.name===e?n(r):ht(r)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),ht(e)})},stack:{get:function(){if(this._stack)return this._stack;try{Nt=!0;var t=Un(this,[],Ki),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Nt=!1}}},timeout:function(t,e){var n=this;return t<1/0?new C(function(r,i){var a=setTimeout(function(){return i(new D.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&ae(C.prototype,Symbol.toStringTag,"Dexie.Promise");Ie.env=Hn();function Nn(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}De(C,{all:function(){var t=ue.apply(null,arguments).map(vt);return new C(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach(function(i,a){return C.resolve(i).then(function(o){t[a]=o,--r||e(t)},n)})})},resolve:function(t){if(t instanceof C)return t;if(t&&typeof t.then=="function")return new C(function(n,r){t.then(n,r)});var e=new C(Ue,!0,t);return Wn(e,zt),e},reject:ht,race:function(){var t=ue.apply(null,arguments).map(vt);return new C(function(e,n){t.map(function(r){return C.resolve(r).then(e,n)})})},PSD:{get:function(){return A},set:function(t){return A=t}},totalEchoes:{get:function(){return pt}},newPSD:ye,usePSD:Be,scheduler:{get:function(){return We},set:function(t){We=t}},rejectionMapper:{get:function(){return Ut},set:function(t){Ut=t}},follow:function(t,e){return new C(function(n,r){return ye(function(i,a){var o=A;o.unhandleds=[],o.onunhandled=a,o.finalize=Ee(function(){var u=this;Pi(function(){u.unhandleds.length===0?i():a(u.unhandleds[0])})},o.finalize),t()},e,n,r)})}});ut&&(ut.allSettled&&ae(C,"allSettled",function(){var t=ue.apply(null,arguments).map(vt);return new C(function(e){t.length===0&&e([]);var n=t.length,r=new Array(n);t.forEach(function(i,a){return C.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||e(r)})})})}),ut.any&&typeof AggregateError!="undefined"&&ae(C,"any",function(){var t=ue.apply(null,arguments).map(vt);return new C(function(e,n){t.length===0&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach(function(a,o){return C.resolve(a).then(function(u){return e(u)},function(u){i[o]=u,--r||n(new AggregateError(i))})})})}));function Vn(t,e){try{e(function(n){if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Ye();n&&typeof n.then=="function"?Vn(t,function(i,a){n instanceof C?n._then(i,a):n.then(i,a)}):(t._state=!0,t._value=n,zn(t)),r&&Ge()}},Ht.bind(null,t))}catch(n){Ht(t,n)}}function Ht(t,e){if(ct.push(e),t._state===null){var n=t._lib&&Ye();e=Ut(e),t._state=!1,t._value=e,re&&e!==null&&typeof e=="object"&&!e._promise&&ci(function(){var r=Dt(e,"stack");e._promise=t,ae(e,"stack",{get:function(){return Nt?r&&(r.get?r.get.apply(e):r.value):t.stack}})}),Ti(t),zn(t),n&&Ge()}}function zn(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Yt(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Ce===0&&(++Ce,We(function(){--Ce==0&&Gt()},[]))}function Yt(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ce,We(ki,[n,t,e])}function ki(t,e,n){try{zt=e;var r,i=e._value;e._state?r=t(i):(ct.length&&(ct=[]),r=t(i),ct.indexOf(i)===-1&&Ii(e)),n.resolve(r)}catch(a){n.reject(a)}finally{zt=null,--Ce==0&&Gt(),--n.psd.ref||n.psd.finalize()}}function Un(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i=t._value,a,o;i!=null?(a=i.name||"Error",o=i.message||i,r=Rt(i,0)):(a=i,o=""),e.push(a+(o?": "+o:"")+r)}return re&&(r=Rt(t._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),t._prev&&Un(t._prev,e,n)),e}function Wn(t,e){var n=e?e._numPrev+1:0;n<Si&&(t._prev=e,t._numPrev=n)}function ft(){Ye()&&Ge()}function Ye(){var t=Vt;return Vt=!1,st=!1,t}function Ge(){var t,e,n;do for(;He.length>0;)for(t=He,He=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(He.length>0);Vt=!0,st=!0}function Gt(){var t=xe;xe=[],t.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=lt.slice(0),n=e.length;n;)e[--n]()}function Pi(t){function e(){t(),lt.splice(lt.indexOf(e),1)}lt.push(e),++Ce,We(function(){--Ce==0&&Gt()},[])}function Ti(t){xe.some(function(e){return e._value===t._value})||xe.push(t)}function Ii(t){for(var e=xe.length;e;)if(xe[--e]._value===t._value){xe.splice(e,1);return}}function ht(t){return new C(Ue,!1,t)}function j(t,e){var n=A;return function(){var r=Ye(),i=A;try{return me(n,!0),t.apply(this,arguments)}catch(a){e&&e(a)}finally{me(i,!1),r&&Ge()}}}var U={awaits:0,echoes:0,id:0},Ri=0,dt=[],Qt=0,pt=0,Bi=0;function ye(t,e,n,r){var i=A,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Bi;var o=Ie.env;a.env=Lt?{Promise:C,PromiseProp:{value:C,configurable:!0,writable:!0},all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject,nthen:Gn(o.nthen,a),gthen:Gn(o.gthen,a)}:{},e&&W(a,e),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Be(a,t,n,r);return a.ref===0&&a.finalize(),u}function Re(){return U.id||(U.id=++Ri),++U.awaits,U.echoes+=jn,U.id}function se(){return U.awaits?(--U.awaits==0&&(U.id=0),U.echoes=U.awaits*jn,!0):!1}(""+Ln).indexOf("[native code]")===-1&&(Re=se=M);function vt(t){return U.echoes&&t&&t.constructor===ut?(Re(),t.then(function(e){return se(),e},function(e){return se(),N(e)})):t}function Oi(t){++pt,(!U.echoes||--U.echoes==0)&&(U.echoes=U.id=0),dt.push(A),me(t,!0)}function Mi(){var t=dt[dt.length-1];dt.pop(),me(t,!1)}function me(t,e){var n=A;if((e?U.echoes&&(!Qt++||t!==A):Qt&&(!--Qt||t!==A))&&Yn(e?Oi.bind(null,t):Mi),t!==A&&(A=t,n===Ie&&(Ie.env=Hn()),Lt)){var r=Ie.env.Promise,i=t.env;ot.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(F,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Hn(){var t=F.Promise;return Lt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(F,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:ot.then,gthen:t.prototype.then}:{}}function Be(t,e,n,r,i){var a=A;try{return me(t,!0),e(n,r,i)}finally{me(a,!1)}}function Yn(t){Ln.call(Ft,t)}function yt(t,e,n,r){return typeof t!="function"?t:function(){var i=A;n&&Re(),me(e,!0);try{return t.apply(this,arguments)}finally{me(i,!1),r&&Yn(se)}}}function Gn(t,e){return function(n,r){return t.call(this,yt(n,e),yt(r,e))}}var Qn="unhandledrejection";function Xn(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(F.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Qn,!0,!0),W(r,i)):F.CustomEvent&&(r=new CustomEvent(Qn,{detail:i}),W(r,i)),r&&F.dispatchEvent&&(dispatchEvent(r),!F.PromiseRejectionEvent&&F.onunhandledrejection))try{F.onunhandledrejection(r)}catch{}re&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch{}}var N=C.reject;function $n(t,e,n,r){if(!t.idbdb||!t._state.openComplete&&!A.letThrough&&!t._vip){if(t._state.openComplete)return N(new D.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return N(new D.DatabaseClosed);t.open().catch(M)}return t._state.dbReadyPromise.then(function(){return $n(t,e,n,r)})}else{var i=t._createTransaction(e,n,t._dbSchema);try{i.create()}catch(a){return N(a)}return i._promise(e,function(a,o){return ye(function(){return A.trans=i,r(a,o,i)})}).then(function(a){return i._completion.then(function(){return a})})}}var qn="3.2.0",Ae=String.fromCharCode(65535),Xt=-1/0,ce="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Jn="String expected.",Qe=[],mt=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Fi=mt,ji=mt,Zn=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},gt="__dbnames",$t="readonly",qt="readwrite";function Se(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var er={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bt(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=Ne(e),delete e[t]),e}:function(e){return e}}var Li=function(){function t(){}return t.prototype._trans=function(e,n,r){var i=this._tx||A.trans,a=this.name;function o(s,c,f){if(!f.schema[a])throw new D.NotFound("Table "+a+" not part of transaction");return n(f.idbtrans,f)}var u=Ye();try{return i&&i.db===this.db?i===A.trans?i._promise(e,o,r):ye(function(){return i._promise(e,o,r)},{trans:i,transless:A.transless||A}):$n(this.db,e,[this.name],o)}finally{u&&Ge()}},t.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:e}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(z(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=L(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(f){return f.compound&&n.every(function(l){return f.keyPath.indexOf(l)>=0})&&f.keyPath.every(function(l){return n.indexOf(l)>=0})})[0];if(r&&this.db._maxKey!==Ae)return this.where(r.name).equals(r.keyPath.map(function(f){return e[f]}));!r&&re&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,a=this.db._deps.indexedDB;function o(f,l){try{return a.cmp(f,l)===0}catch{return!1}}var u=n.reduce(function(f,l){var d=f[0],b=f[1],p=i[l],h=e[l];return[d||p,d||!p?Se(b,p&&p.multi?function(y){var _=oe(y,l);return z(_)&&_.some(function(w){return o(h,w)})}:function(y){return o(h,oe(y,l))}):b]},[null,null]),s=u[0],c=u[1];return s?this.where(s.name).equals(e[s.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,z(e)?"["+e.join("+")+"]":e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){this.schema.mappedClass=e;var n=function(r){if(!r)return r;var i=Object.create(e.prototype);for(var a in r)if($(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},t.prototype.defineClass=function(){function e(n){W(this,n)}return this.mapToClass(e)},t.prototype.add=function(e,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=e;return o&&a&&(u=bt(o)(e)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?C.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{Z(e,o,s)}catch{}return s})},t.prototype.update=function(e,n){if(typeof e=="object"&&!z(e)){var r=oe(e,this.schema.primKey.keyPath);if(r===void 0)return N(new D.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?L(n).forEach(function(i){Z(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(e).modify(n)},t.prototype.put=function(e,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=e;return o&&a&&(u=bt(o)(e)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?C.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{Z(e,o,s)}catch{}return s})},t.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?C.reject(r.failures[0]):void 0})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:er})}).then(function(n){return n.numFailures?C.reject(n.failures[0]):void 0})},t.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},t.prototype.bulkAdd=function(e,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,c=s.auto,f=s.keyPath;if(f&&a)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,d=f&&c?e.map(bt(f)):e;return i.core.mutate({trans:u,type:"add",keys:a,values:d,wantResults:o}).then(function(b){var p=b.numFailures,h=b.results,y=b.lastResult,_=b.failures,w=o?h:y;if(p===0)return w;throw new Ve(i.name+".bulkAdd(): "+p+" of "+l+" operations failed",_)})})},t.prototype.bulkPut=function(e,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,c=s.auto,f=s.keyPath;if(f&&a)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,d=f&&c?e.map(bt(f)):e;return i.core.mutate({trans:u,type:"put",keys:a,values:d,wantResults:o}).then(function(b){var p=b.numFailures,h=b.results,y=b.lastResult,_=b.failures,w=o?h:y;if(p===0)return w;throw new Ve(i.name+".bulkPut(): "+p+" of "+l+" operations failed",_)})})},t.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:e})}).then(function(i){var a=i.numFailures,o=i.lastResult,u=i.failures;if(a===0)return o;throw new Ve(n.name+".bulkDelete(): "+a+" of "+r+" operations failed",u)})},t}();function Xe(t){var e={},n=function(u,s){if(s){for(var c=arguments.length,f=new Array(c-1);--c;)f[c-1]=arguments[c];return e[u].subscribe.apply(null,f),t}else if(typeof u=="string")return e[u]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(u,s,c){if(typeof u=="object")return o(u);s||(s=Ai),c||(c=M);var f={subscribers:[],fire:c,subscribe:function(l){f.subscribers.indexOf(l)===-1&&(f.subscribers.push(l),f.fire=s(f.fire,l))},unsubscribe:function(l){f.subscribers=f.subscribers.filter(function(d){return d!==l}),f.fire=f.subscribers.reduce(s,c)}};return e[u]=n[u]=f,f}function o(u){L(u).forEach(function(s){var c=u[s];if(z(c))a(s,u[s][0],u[s][1]);else if(c==="asap")var f=a(s,ze,function(){for(var d=arguments.length,b=new Array(d);d--;)b[d]=arguments[d];f.subscribers.forEach(function(p){Dn(function(){p.apply(null,b)})})});else throw new D.InvalidArgument("Invalid event config")})}}function $e(t,e){return ke(e).from({prototype:t}),e}function Ni(t){return $e(Li.prototype,function(n,r,i){this.db=t,this._tx=i,this.name=n,this.schema=r,this.hook=t._allTables[n]?t._allTables[n].hook:Xe(null,{creating:[Ei,M],reading:[wi,ze],updating:[Ci,M],deleting:[xi,M]})})}function Oe(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Jt(t,e){t.filter=Se(t.filter,e)}function Zt(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Se(r(),e())}:e,t.justLimit=n&&!r}function Vi(t,e){t.isMatch=Se(t.isMatch,e)}function _t(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new D.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function tr(t,e,n){var r=_t(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function wt(t,e,n,r){var i=t.replayFilter?Se(t.filter,t.replayFilter()):t.filter;if(t.or){var a={},o=function(u,s,c){if(!i||i(s,c,function(d){return s.stop(d)},function(d){return s.fail(d)})){var f=s.primaryKey,l=""+f;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(f)),$(a,l)||(a[l]=!0,e(u,s,c))}};return Promise.all([t.or._iterate(o,n),nr(tr(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}else return nr(tr(t,r,n),Se(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function nr(t,e,n,r){var i=r?function(o,u,s){return n(r(o),u,s)}:n,a=j(i);return t.then(function(o){if(o)return o.start(function(){var u=function(){return o.continue()};(!e||e(o,function(s){return u=s},function(s){o.stop(s),u=M},function(s){o.fail(s),u=M}))&&a(o.value,o,function(s){return u=s}),u()})})}function H(t,e){try{var n=rr(t),r=rr(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Ui(ir(t),ir(e));case"Array":return zi(t,e)}}catch{}return NaN}function zi(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,a=0;a<i;++a){var o=H(t[a],e[a]);if(o!==0)return o}return n===r?0:n<r?-1:1}function Ui(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,a=0;a<i;++a)if(t[a]!==e[a])return t[a]<e[a]?-1:1;return n===r?0:n<r?-1:1}function rr(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var n=Pt(t);return n==="ArrayBuffer"?"binary":n}function ir(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Wi=function(){function t(){}return t.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,N.bind(null,r.error)):r.table._trans("readonly",e).then(n)},t.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,N.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=Se(n.algorithm,e)},t.prototype._iterate=function(e,n){return wt(this._ctx,e,n,this._ctx.table.core)},t.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&W(r,e),n._ctx=r,n},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return wt(n,e,r,n.table.core)})},t.prototype.count=function(e){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(Oe(i,!0))return a.count({trans:r,query:{index:_t(i,a.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var o=0;return wt(i,function(){return++o,!1},r,a).then(function(){return o})}).then(e)},t.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),i=r[0],a=r.length-1;function o(c,f){return f?o(c[r[f]],f-1):c[i]}var u=this._ctx.dir==="next"?1:-1;function s(c,f){var l=o(c,a),d=o(f,a);return l<d?-u:l>d?u:0}return this.toArray(function(c){return c.sort(s)}).then(n)},t.prototype.toArray=function(e){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Oe(i,!0)&&i.limit>0){var a=i.valueMapper,o=_t(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(s){var c=s.result;return a?c.map(a):c})}else{var u=[];return wt(i,function(s){return u.push(s)},r,i.table.core).then(function(){return u})}},e)},t.prototype.offset=function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,Oe(n)?Zt(n,function(){var r=e;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):Zt(n,function(){var r=e;return function(){return--r<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Zt(this._ctx,function(){var n=e;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},t.prototype.until=function(e,n){return Jt(this._ctx,function(r,i,a){return e(r.value)?(i(a),n):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return Jt(this._ctx,function(n){return e(n.value)}),Vi(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})},t.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(e)},t.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&Oe(n,!0)&&n.limit>0)return this._read(function(i){var a=_t(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Jt(this._ctx,function(i){var a=i.primaryKey.toString(),o=$(r,a);return r[a]=!0,!o}),this},t.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof e=="function")a=e;else{var o=L(e),u=o.length;a=function(_){for(var w=!1,m=0;m<u;++m){var g=o[m],v=e[g];oe(_,g)!==v&&(Z(_,g,v),w=!0)}return w}}var s=r.table.core,c=s.schema.primaryKey,f=c.outbound,l=c.extractKey,d=n.db._options.modifyChunkSize||200,b=[],p=0,h=[],y=function(_,w){var m=w.failures,g=w.numFailures;p+=_-g;for(var v=0,E=L(m);v<E.length;v++){var S=E[v];b.push(m[S])}};return n.clone().primaryKeys().then(function(_){var w=function(m){var g=Math.min(d,_.length-m);return s.getMany({trans:i,keys:_.slice(m,m+g),cache:"immutable"}).then(function(v){for(var E=[],S=[],x=f?[]:null,K=[],k=0;k<g;++k){var B=v[k],O={value:Ne(B),primKey:_[m+k]};a.call(O,O.value,O)!==!1&&(O.value==null?K.push(_[m+k]):!f&&H(l(B),l(O.value))!==0?(K.push(_[m+k]),E.push(O.value)):(S.push(O.value),f&&x.push(_[m+k])))}var I=Oe(r)&&r.limit===1/0&&(typeof e!="function"||e===en)&&{index:r.index,range:r.range};return Promise.resolve(E.length>0&&s.mutate({trans:i,type:"add",values:E}).then(function(V){for(var P in V.failures)K.splice(parseInt(P),1);y(E.length,V)})).then(function(){return(S.length>0||I&&typeof e=="object")&&s.mutate({trans:i,type:"put",keys:x,values:S,criteria:I,changeSpec:typeof e!="function"&&e}).then(function(V){return y(S.length,V)})}).then(function(){return(K.length>0||I&&e===en)&&s.mutate({trans:i,type:"delete",keys:K,criteria:I}).then(function(V){return y(K.length,V)})}).then(function(){return _.length>m+g&&w(m+d)})})};return w(0).then(function(){if(b.length>0)throw new it("Error modifying one or more objects",b,p,h);return _.length})})})},t.prototype.delete=function(){var e=this._ctx,n=e.range;return Oe(e)&&(e.isPrimKey&&!ji||n.type===3)?this._write(function(r){var i=e.table.core.schema.primaryKey,a=n;return e.table.core.count({trans:r,query:{index:i,range:a}}).then(function(o){return e.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(u){var s=u.failures;u.lastResult,u.results;var c=u.numFailures;if(c)throw new it("Could not delete some values",Object.keys(s).map(function(f){return s[f]}),o-c);return o-c})})}):this.modify(en)},t}(),en=function(t,e){return e.value=null};function Hi(t){return $e(Wi.prototype,function(n,r){this.db=t;var i=er,a=null;if(r)try{i=r()}catch(c){a=c}var o=n._ctx,u=o.table,s=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:o.or,valueMapper:s!==ze?s:null}})}function Yi(t,e){return t<e?-1:t===e?0:1}function Gi(t,e){return t>e?-1:t===e?0:1}function G(t,e,n){var r=t instanceof or?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Me(t){return new t.Collection(t,function(){return ar("")}).limit(0)}function Qi(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function Xi(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function $i(t,e,n,r,i,a){for(var o=Math.min(t.length,r.length),u=-1,s=0;s<o;++s){var c=e[s];if(c!==r[s])return i(t[s],n[s])<0?t.substr(0,s)+n[s]+n.substr(s+1):i(t[s],r[s])<0?t.substr(0,s)+r[s]+n.substr(s+1):u>=0?t.substr(0,u)+e[u]+n.substr(u+1):null;i(t[s],c)<0&&(u=s)}return o<r.length&&a==="next"?t+n.substr(t.length):o<t.length&&a==="prev"?t.substr(0,n.length):u<0?null:t.substr(0,u)+r[u]+n.substr(u+1)}function Et(t,e,n,r){var i,a,o,u,s,c,f,l=n.length;if(!n.every(function(h){return typeof h=="string"}))return G(t,Jn);function d(h){i=Qi(h),a=Xi(h),o=h==="next"?Yi:Gi;var y=n.map(function(_){return{lower:a(_),upper:i(_)}}).sort(function(_,w){return o(_.lower,w.lower)});u=y.map(function(_){return _.upper}),s=y.map(function(_){return _.lower}),c=h,f=h==="next"?"":r}d("next");var b=new t.Collection(t,function(){return ge(u[0],s[l-1]+r)});b._ondirectionchange=function(h){d(h)};var p=0;return b._addAlgorithm(function(h,y,_){var w=h.key;if(typeof w!="string")return!1;var m=a(w);if(e(m,s,p))return!0;for(var g=null,v=p;v<l;++v){var E=$i(w,m,u[v],s[v],o,c);E===null&&g===null?p=v+1:(g===null||o(g,E)>0)&&(g=E)}return y(g!==null?function(){h.continue(g+f)}:_),!1}),b}function ge(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function ar(t){return{type:1,lower:t,upper:t}}var or=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&!(r&&i)?Me(this):new this.Collection(this,function(){return ge(e,n,!r,!i)})}catch{return G(this,ce)}},t.prototype.equals=function(e){return e==null?G(this,ce):new this.Collection(this,function(){return ar(e)})},t.prototype.above=function(e){return e==null?G(this,ce):new this.Collection(this,function(){return ge(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?G(this,ce):new this.Collection(this,function(){return ge(e,void 0,!1)})},t.prototype.below=function(e){return e==null?G(this,ce):new this.Collection(this,function(){return ge(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?G(this,ce):new this.Collection(this,function(){return ge(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?G(this,Jn):this.between(e,e+Ae,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Et(this,function(n,r){return n.indexOf(r[0])===0},[e],Ae)},t.prototype.equalsIgnoreCase=function(e){return Et(this,function(n,r){return n===r[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=ue.apply(Pe,arguments);return e.length===0?Me(this):Et(this,function(n,r){return r.indexOf(n)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=ue.apply(Pe,arguments);return e.length===0?Me(this):Et(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},e,Ae)},t.prototype.anyOf=function(){var e=this,n=ue.apply(Pe,arguments),r=this._cmp;try{n.sort(r)}catch{return G(this,ce)}if(n.length===0)return Me(this);var i=new this.Collection(this,function(){return ge(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?e._ascending:e._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(o,u,s){for(var c=o.key;r(c,n[a])>0;)if(++a,a===n.length)return u(s),!1;return r(c,n[a])===0?!0:(u(function(){o.continue(n[a])}),!1)}),i},t.prototype.notEqual=function(e){return this.inAnyRange([[Xt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=ue.apply(Pe,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return G(this,ce)}var n=e.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Xt,i]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,n){var r=this,i=this._cmp,a=this._ascending,o=this._descending,u=this._min,s=this._max;if(e.length===0)return Me(this);if(!e.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&a(v[0],v[1])<=0}))return G(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var c=!n||n.includeLowers!==!1,f=n&&n.includeUppers===!0;function l(v,E){for(var S=0,x=v.length;S<x;++S){var K=v[S];if(i(E[0],K[1])<0&&i(E[1],K[0])>0){K[0]=u(K[0],E[0]),K[1]=s(K[1],E[1]);break}}return S===x&&v.push(E),v}var d=a;function b(v,E){return d(v[0],E[0])}var p;try{p=e.reduce(l,[]),p.sort(b)}catch{return G(this,ce)}var h=0,y=f?function(v){return a(v,p[h][1])>0}:function(v){return a(v,p[h][1])>=0},_=c?function(v){return o(v,p[h][0])>0}:function(v){return o(v,p[h][0])>=0};function w(v){return!y(v)&&!_(v)}var m=y,g=new this.Collection(this,function(){return ge(p[0][0],p[p.length-1][1],!c,!f)});return g._ondirectionchange=function(v){v==="next"?(m=y,d=a):(m=_,d=o),p.sort(b)},g._addAlgorithm(function(v,E,S){for(var x=v.key;m(x);)if(++h,h===p.length)return E(S),!1;return w(x)?!0:(r._cmp(x,p[h][1])===0||r._cmp(x,p[h][0])===0||E(function(){d===a?v.continue(p[h][0]):v.continue(p[h][1])}),!1)}),g},t.prototype.startsWithAnyOf=function(){var e=ue.apply(Pe,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?Me(this):this.inAnyRange(e.map(function(n){return[n,n+Ae]})):G(this,"startsWithAnyOf() only works with strings")},t}();function qi(t){return $e(or.prototype,function(n,r,i){this.db=t,this._ctx={table:n,index:r===":id"?null:r,or:i};var a=t._deps.indexedDB;if(!a)throw new D.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(o,u){return a.cmp(u,o)},this._max=function(o,u){return a.cmp(o,u)>0?o:u},this._min=function(o,u){return a.cmp(o,u)<0?o:u},this._IDBKeyRange=t._deps.IDBKeyRange})}function ie(t){return j(function(e){return qe(e),t(e.target.error),!1})}function qe(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Je="storagemutated",be="x-storagemutated-1",_e=Xe(null,Je),Ji=function(){function t(){}return t.prototype._lock=function(){return Le(!A.global),++this._reculock,this._reculock===1&&!A.global&&(A.lockOwnerFor=this),this},t.prototype._unlock=function(){if(Le(!A.global),--this._reculock==0)for(A.global||(A.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Be(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&A.lockOwnerFor!==this},t.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(Le(!this.idbtrans),!e&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new D.DatabaseClosed(i);case"MissingAPIError":throw new D.MissingAPI(i.message,i);default:throw new D.OpenFailed(i)}if(!this.active)throw new D.TransactionInactive;return Le(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=j(function(a){qe(a),n._reject(e.error)}),e.onabort=j(function(a){qe(a),n.active&&n._reject(new D.Abort(e.error)),n.active=!1,n.on("abort").fire(a)}),e.oncomplete=j(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&_e.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,n,r){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return N(new D.ReadOnly("Transaction is readonly"));if(!this.active)return N(new D.TransactionInactive);if(this._locked())return new C(function(o,u){i._blockedFuncs.push([function(){i._promise(e,n,r).then(o,u)},A])});if(r)return ye(function(){var o=new C(function(u,s){i._lock();var c=n(u,s,i);c&&c.then&&c.then(u,s)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var a=new C(function(o,u){var s=n(o,u,i);s&&s.then&&s.then(o,u)});return a._lib=!0,a},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var n=this._root(),r=C.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new C(function(o,u){r.then(function(s){return n._waitingQueue.push(j(o.bind(null,s)))},function(s){return n._waitingQueue.push(j(u.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort))},t.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if($(n,e))return n[e];var r=this.schema[e];if(!r)throw new D.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i},t}();function Zi(t){return $e(Ji.prototype,function(n,r,i,a,o){var u=this;this.db=t,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Xe(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new C(function(s,c){u._resolve=s,u._reject=c}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var c=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):c&&u.idbtrans&&u.idbtrans.abort(),N(s)})})}function tn(t,e,n,r,i,a,o){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+ur(e)}}function ur(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function sr(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:kn(n,function(r){return[r.name,r]})}}function ea(t){return t.length===1?t[0]:t}var Ze=function(t){try{return t.only([[]]),Ze=function(){return[[]]},[[]]}catch{return Ze=function(){return Ae},Ae}};function nn(t){return t==null?function(){}:typeof t=="string"?ta(t):function(e){return oe(e,t)}}function ta(t){var e=t.split(".");return e.length===1?function(n){return n[t]}:function(n){return oe(n,t)}}function cr(t){return[].slice.call(t)}var na=0;function et(t){return t==null?":id":typeof t=="string"?t:"["+t.join("+")+"]"}function ra(t,e,n){function r(l,d){var b=cr(l.objectStoreNames);return{schema:{name:l.name,tables:b.map(function(p){return d.objectStore(p)}).map(function(p){var h=p.keyPath,y=p.autoIncrement,_=z(h),w=h==null,m={},g={name:p.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:_,keyPath:h,autoIncrement:y,unique:!0,extractKey:nn(h)},indexes:cr(p.indexNames).map(function(v){return p.index(v)}).map(function(v){var E=v.name,S=v.unique,x=v.multiEntry,K=v.keyPath,k=z(K),B={name:E,compound:k,keyPath:K,unique:S,multiEntry:x,extractKey:nn(K)};return m[et(K)]=B,B}),getIndexByKeyPath:function(v){return m[et(v)]}};return m[":id"]=g.primaryKey,h!=null&&(m[et(h)]=g.primaryKey),g})},hasGetAll:b.length>0&&"getAll"in d.objectStore(b[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var d=l.lower,b=l.upper,p=l.lowerOpen,h=l.upperOpen,y=d===void 0?b===void 0?null:e.upperBound(b,!!h):b===void 0?e.lowerBound(d,!!p):e.bound(d,b,!!p,!!h);return y}function a(l){var d=l.name;function b(y){var _=y.trans,w=y.type,m=y.keys,g=y.values,v=y.range;return new Promise(function(E,S){E=j(E);var x=_.objectStore(d),K=x.keyPath==null,k=w==="put"||w==="add";if(!k&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var B=(m||g||{length:1}).length;if(m&&g&&m.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(B===0)return E({numFailures:0,failures:{},results:[],lastResult:void 0});var O,I=[],V=[],P=0,Q=function(te){++P,qe(te)};if(w==="deleteRange"){if(v.type===4)return E({numFailures:P,failures:V,results:[],lastResult:void 0});v.type===3?I.push(O=x.clear()):I.push(O=x.delete(i(v)))}else{var q=k?K?[g,m]:[g,null]:[m,null],he=q[0],ee=q[1];if(k)for(var X=0;X<B;++X)I.push(O=ee&&ee[X]!==void 0?x[w](he[X],ee[X]):x[w](he[X])),O.onerror=Q;else for(var X=0;X<B;++X)I.push(O=x[w](he[X])),O.onerror=Q}var de=function(te){var Fe=te.target.result;I.forEach(function(J,nt){return J.error!=null&&(V[nt]=J.error)}),E({numFailures:P,failures:V,results:w==="delete"?m:I.map(function(J){return J.result}),lastResult:Fe})};O.onerror=function(te){Q(te),de(te)},O.onsuccess=de})}function p(y){var _=y.trans,w=y.values,m=y.query,g=y.reverse,v=y.unique;return new Promise(function(E,S){E=j(E);var x=m.index,K=m.range,k=_.objectStore(d),B=x.isPrimaryKey?k:k.index(x.name),O=g?v?"prevunique":"prev":v?"nextunique":"next",I=w||!("openKeyCursor"in B)?B.openCursor(i(K),O):B.openKeyCursor(i(K),O);I.onerror=ie(S),I.onsuccess=j(function(V){var P=I.result;if(!P){E(null);return}P.___id=++na,P.done=!1;var Q=P.continue.bind(P),q=P.continuePrimaryKey;q&&(q=q.bind(P));var he=P.advance.bind(P),ee=function(){throw new Error("Cursor not started")},X=function(){throw new Error("Cursor not stopped")};P.trans=_,P.stop=P.continue=P.continuePrimaryKey=P.advance=ee,P.fail=j(S),P.next=function(){var de=this,te=1;return this.start(function(){return te--?de.continue():de.stop()}).then(function(){return de})},P.start=function(de){var te=new Promise(function(J,nt){J=j(J),I.onerror=ie(nt),P.fail=nt,P.stop=function(gr){P.stop=P.continue=P.continuePrimaryKey=P.advance=X,J(gr)}}),Fe=function(){if(I.result)try{de()}catch(J){P.fail(J)}else P.done=!0,P.start=function(){throw new Error("Cursor behind last entry")},P.stop()};return I.onsuccess=j(function(J){I.onsuccess=Fe,Fe()}),P.continue=Q,P.continuePrimaryKey=q,P.advance=he,Fe(),te},E(P)},S)})}function h(y){return function(_){return new Promise(function(w,m){w=j(w);var g=_.trans,v=_.values,E=_.limit,S=_.query,x=E===1/0?void 0:E,K=S.index,k=S.range,B=g.objectStore(d),O=K.isPrimaryKey?B:B.index(K.name),I=i(k);if(E===0)return w({result:[]});if(y){var V=v?O.getAll(I,x):O.getAllKeys(I,x);V.onsuccess=function(he){return w({result:he.target.result})},V.onerror=ie(m)}else{var P=0,Q=v||!("openKeyCursor"in O)?O.openCursor(I):O.openKeyCursor(I),q=[];Q.onsuccess=function(he){var ee=Q.result;if(!ee)return w({result:q});if(q.push(v?ee.value:ee.primaryKey),++P===E)return w({result:q});ee.continue()},Q.onerror=ie(m)}})}}return{name:d,schema:l,mutate:b,getMany:function(y){var _=y.trans,w=y.keys;return new Promise(function(m,g){m=j(m);for(var v=_.objectStore(d),E=w.length,S=new Array(E),x=0,K=0,k,B=function(P){var Q=P.target;(S[Q._pos]=Q.result)!=null,++K===x&&m(S)},O=ie(g),I=0;I<E;++I){var V=w[I];V!=null&&(k=v.get(w[I]),k._pos=I,k.onsuccess=B,k.onerror=O,++x)}x===0&&m(S)})},get:function(y){var _=y.trans,w=y.key;return new Promise(function(m,g){m=j(m);var v=_.objectStore(d),E=v.get(w);E.onsuccess=function(S){return m(S.target.result)},E.onerror=ie(g)})},query:h(s),openCursor:p,count:function(y){var _=y.query,w=y.trans,m=_.index,g=_.range;return new Promise(function(v,E){var S=w.objectStore(d),x=m.isPrimaryKey?S:S.index(m.name),K=i(g),k=K?x.count(K):x.count();k.onsuccess=j(function(B){return v(B.target.result)}),k.onerror=ie(E)})}}}var o=r(t,n),u=o.schema,s=o.hasGetAll,c=u.tables.map(function(l){return a(l)}),f={};return c.forEach(function(l){return f[l.name]=l}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(l){var d=f[l];if(!d)throw new Error("Table '"+l+"' not found");return f[l]},MIN_KEY:-1/0,MAX_KEY:Ze(e),schema:u}}function ia(t,e){return e.reduce(function(n,r){var i=r.create;return T(T({},n),i(n))},t)}function aa(t,e,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=ia(ra(e,i,r),t.dbcore);return{dbcore:a}}function rn(t,e){var n=t._novip,r=e.db,i=aa(n._middlewares,r,n._deps,e);n.core=i.dbcore,n.tables.forEach(function(a){var o=a.name;n.core.schema.tables.some(function(u){return u.name===o})&&(a.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=a.core))})}function xt(t,e,n,r){var i=t._novip;n.forEach(function(a){var o=r[a];e.forEach(function(u){var s=Dt(u,a);(!s||"value"in s&&s.value===void 0)&&(u===i.Transaction.prototype||u instanceof i.Transaction?ae(u,a,{get:function(){return this.table(a)},set:function(c){Sn(this,a,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):u[a]=new i.Table(a,o))})})}function an(t,e){var n=t._novip;e.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function oa(t,e){return t._cfg.version-e._cfg.version}function ua(t,e,n,r){var i=t._dbSchema,a=t._createTransaction("readwrite",t._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),u=A.transless||A;ye(function(){A.trans=a,A.transless=u,e===0?(L(i).forEach(function(s){on(n,s,i[s].primKey,i[s].indexes)}),rn(t,n),C.follow(function(){return t.on.populate.fire(a)}).catch(o)):sa(t,e,a,n).catch(o)})}function sa(t,e,n,r){var i=t._novip,a=[],o=i._versions,u=i._dbSchema=sn(i,i.idbdb,r),s=!1,c=o.filter(function(l){return l._cfg.version>=e});c.forEach(function(l){a.push(function(){var d=u,b=l._cfg.dbschema;cn(i,d,r),cn(i,b,r),u=i._dbSchema=b;var p=lr(d,b);p.add.forEach(function(g){on(r,g[0],g[1].primKey,g[1].indexes)}),p.change.forEach(function(g){if(g.recreate)throw new D.Upgrade("Not yet support for changing primary key");var v=r.objectStore(g.name);g.add.forEach(function(E){return un(v,E)}),g.change.forEach(function(E){v.deleteIndex(E.name),un(v,E)}),g.del.forEach(function(E){return v.deleteIndex(E)})});var h=l._cfg.contentUpgrade;if(h&&l._cfg.version>e){rn(i,r),n._memoizedTables={},s=!0;var y=Pn(b);p.del.forEach(function(g){y[g]=d[g]}),an(i,[i.Transaction.prototype]),xt(i,[i.Transaction.prototype],L(y),y),n.schema=y;var _=It(h);_&&Re();var w,m=C.follow(function(){if(w=h(n),w&&_){var g=se.bind(null,null);w.then(g,g)}});return w&&typeof w.then=="function"?C.resolve(w):m.then(function(){return w})}}),a.push(function(d){if(!s||!Fi){var b=l._cfg.dbschema;la(b,d)}an(i,[i.Transaction.prototype]),xt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function f(){return a.length?C.resolve(a.shift()(n.idbtrans)).then(f):C.resolve()}return f().then(function(){ca(u,r)})}function lr(t,e){var n={del:[],add:[],change:[]},r;for(r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],a=e[r];if(!i)n.add.push([r,a]);else{var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!mt)o.recreate=!0,n.change.push(o);else{var u=i.idxByName,s=a.idxByName,c=void 0;for(c in u)s[c]||o.del.push(c);for(c in s){var f=u[c],l=s[c];f?f.src!==l.src&&o.change.push(l):o.add.push(l)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function on(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return un(i,a)}),i}function ca(t,e){L(t).forEach(function(n){e.db.objectStoreNames.contains(n)||on(e,n,t[n].primKey,t[n].indexes)})}function la(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return t[n]==null&&e.db.deleteObjectStore(n)})}function un(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function sn(t,e,n){var r={},i=rt(e.objectStoreNames,0);return i.forEach(function(a){for(var o=n.objectStore(a),u=o.keyPath,s=tn(ur(u),u||"",!1,!1,!!o.autoIncrement,u&&typeof u!="string",!0),c=[],f=0;f<o.indexNames.length;++f){var l=o.index(o.indexNames[f]);u=l.keyPath;var d=tn(l.name,u,!!l.unique,!!l.multiEntry,!1,u&&typeof u!="string",!1);c.push(d)}r[a]=sr(a,s,c)}),r}function fa(t,e,n){var r=t._novip;r.verno=e.version/10;var i=r._dbSchema=sn(r,e,n);r._storeNames=rt(e.objectStoreNames,0),xt(r,[r._allTables],L(i),i)}function ha(t,e){var n=sn(t,t.idbdb,e),r=lr(n,t._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function cn(t,e,n){for(var r=t._novip,i=n.db.objectStoreNames,a=0;a<i.length;++a){var o=i[a],u=n.objectStore(o);r._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var c=u.indexNames[s],f=u.index(c).keyPath,l=typeof f=="string"?f:"["+rt(f).join("+")+"]";if(e[o]){var d=e[o].idxByName[l];d&&(d.name=c,delete e[o].idxByName[l],e[o].idxByName[c]=d)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&F.WorkerGlobalScope&&F instanceof F.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function da(t){return t.split(",").map(function(e,n){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return tn(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),z(i),n===0)})}var pa=function(){function t(){}return t.prototype._parseStoresSpec=function(e,n){L(e).forEach(function(r){if(e[r]!==null){var i=da(e[r]),a=i.shift();if(a.multi)throw new D.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")}),n[r]=sr(r,a,i)}})},t.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?W(this._cfg.storesSource,e):e;var r=n._versions,i={},a={};return r.forEach(function(o){W(i,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(i,a)}),n._dbSchema=a,an(n,[n._allTables,n,n.Transaction.prototype]),xt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],L(a),a),n._storeNames=L(a),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Ot(this._cfg.contentUpgrade||M,e),this},t}();function va(t){return $e(pa.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ln(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new gn(gt,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function fn(t){return t&&typeof t.databases=="function"}function ya(t){var e=t.indexedDB,n=t.IDBKeyRange;return fn(e)?Promise.resolve(e.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==gt})}):ln(e,n).toCollection().primaryKeys()}function ma(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!fn(n)&&e!==gt&&ln(n,r).put({name:e}).catch(M)}function ga(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!fn(n)&&e!==gt&&ln(n,r).delete(e).catch(M)}function hn(t){return ye(function(){return A.letThrough=!0,t()})}function ba(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function _a(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?N(e.dbOpenError):t});re&&(e.openCanceller._stackHolder=we()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new D.DatabaseClosed("db.open() was cancelled")}var a=e.dbReadyResolve,o=null,u=!1;return C.race([r,(typeof navigator=="undefined"?C.resolve():ba()).then(function(){return new C(function(s,c){if(i(),!n)throw new D.MissingAPI;var f=t.name,l=e.autoSchema?n.open(f):n.open(f,Math.round(t.verno*10));if(!l)throw new D.MissingAPI;l.onerror=ie(c),l.onblocked=j(t._fireOnBlocked),l.onupgradeneeded=j(function(d){if(o=l.transaction,e.autoSchema&&!t._options.allowEmptyDB){l.onerror=qe,o.abort(),l.result.close();var b=n.deleteDatabase(f);b.onsuccess=b.onerror=j(function(){c(new D.NoSuchDatabase("Database "+f+" doesnt exist"))})}else{o.onerror=ie(c);var p=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;u=p<1,t._novip.idbdb=l.result,ua(t,p/10,o,c)}},c),l.onsuccess=j(function(){o=null;var d=t._novip.idbdb=l.result,b=rt(d.objectStoreNames);if(b.length>0)try{var p=d.transaction(ea(b),"readonly");e.autoSchema?fa(t,d,p):(cn(t,t._dbSchema,p),ha(t,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),rn(t,p)}catch{}Qe.push(t),d.onversionchange=j(function(h){e.vcFired=!0,t.on("versionchange").fire(h)}),d.onclose=j(function(h){t.on("close").fire(h)}),u&&ma(t._deps,f),s()},c)})})]).then(function(){return i(),e.onReadyBeingFired=[],C.resolve(hn(function(){return t.on.ready.fire(t.vip)})).then(function s(){if(e.onReadyBeingFired.length>0){var c=e.onReadyBeingFired.reduce(Ot,M);return e.onReadyBeingFired=[],C.resolve(hn(function(){return c(t.vip)})).then(s)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return t}).catch(function(s){e.dbOpenError=s;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),N(s)}).finally(function(){e.openComplete=!0,a()})}function dn(t){var e=function(o){return t.next(o)},n=function(o){return t.throw(o)},r=a(e),i=a(n);function a(o){return function(u){var s=o(u),c=s.value;return s.done?c:!c||typeof c.then!="function"?z(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return a(e)()}function wa(t,e,n){var r=arguments.length;if(r<2)throw new D.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=Tn(i);return[t,a,n]}function Ea(t,e,n,r,i){return C.resolve().then(function(){var a=A.transless||A,o=t._createTransaction(e,n,t._dbSchema,r),u={trans:o,transless:a};r?o.idbtrans=r.idbtrans:o.create();var s=It(i);s&&Re();var c,f=C.follow(function(){if(c=i.call(o,o),c)if(s){var l=se.bind(null,null);c.then(l,l)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=dn(c))},u);return(c&&typeof c.then=="function"?C.resolve(c).then(function(l){return o.active?l:N(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return c})).then(function(l){return r&&o._resolve(),o._completion.then(function(){return l})}).catch(function(l){return o._reject(l),N(l)})})}function Ct(t,e,n){for(var r=z(t)?t.slice():[t],i=0;i<n;++i)r.push(e);return r}function xa(t){return T(T({},t),{table:function(e){var n=t.table(e),r=n.schema,i={},a=[];function o(h,y,_){var w=et(h),m=i[w]=i[w]||[],g=h==null?0:typeof h=="string"?1:h.length,v=y>0,E=T(T({},_),{isVirtual:v,keyTail:y,keyLength:g,extractKey:nn(h),unique:!v&&_.unique});if(m.push(E),E.isPrimaryKey||a.push(E),g>1){var S=g===2?h[0]:h.slice(0,g-1);o(S,y+1,_)}return m.sort(function(x,K){return x.keyTail-K.keyTail}),E}var u=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,c=r.indexes;s<c.length;s++){var f=c[s];o(f.keyPath,0,f)}function l(h){var y=i[et(h)];return y&&y[0]}function d(h,y){return{type:h.type===1?2:h.type,lower:Ct(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,y),lowerOpen:!0,upper:Ct(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,y),upperOpen:!0}}function b(h){var y=h.query.index;return y.isVirtual?T(T({},h),{query:{index:y,range:d(h.query.range,y.keyTail)}}):h}var p=T(T({},n),{schema:T(T({},r),{primaryKey:u,indexes:a,getIndexByKeyPath:l}),count:function(h){return n.count(b(h))},query:function(h){return n.query(b(h))},openCursor:function(h){var y=h.query.index,_=y.keyTail,w=y.isVirtual,m=y.keyLength;if(!w)return n.openCursor(h);function g(v){function E(x){x!=null?v.continue(Ct(x,h.reverse?t.MAX_KEY:t.MIN_KEY,_)):h.unique?v.continue(v.key.slice(0,m).concat(h.reverse?t.MIN_KEY:t.MAX_KEY,_)):v.continue()}var S=Object.create(v,{continue:{value:E},continuePrimaryKey:{value:function(x,K){v.continuePrimaryKey(Ct(x,t.MAX_KEY,_),K)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var x=v.key;return m===1?x[0]:x.slice(0,m)}},value:{get:function(){return v.value}}});return S}return n.openCursor(b(h)).then(function(v){return v&&g(v)})}});return p}})}var Ca={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:xa};function pn(t,e,n,r){return n=n||{},r=r||"",L(t).forEach(function(i){if(!$(e,i))n[r+i]=void 0;else{var a=t[i],o=e[i];if(typeof a=="object"&&typeof o=="object"&&a&&o){var u=Pt(a),s=Pt(o);u!==s?n[r+i]=e[i]:u==="Object"?pn(a,o,n,r+i+"."):a!==o&&(n[r+i]=e[i])}else a!==o&&(n[r+i]=e[i])}}),L(e).forEach(function(i){$(t,i)||(n[r+i]=e[i])}),n}function Aa(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var Sa={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return T(T({},t),{table:function(e){var n=t.table(e),r=n.schema.primaryKey,i=T(T({},n),{mutate:function(a){var o=A.trans,u=o.table(e).hook,s=u.deleting,c=u.creating,f=u.updating;switch(a.type){case"add":if(c.fire===M)break;return o._promise("readwrite",function(){return l(a)},!0);case"put":if(c.fire===M&&f.fire===M)break;return o._promise("readwrite",function(){return l(a)},!0);case"delete":if(s.fire===M)break;return o._promise("readwrite",function(){return l(a)},!0);case"deleteRange":if(s.fire===M)break;return o._promise("readwrite",function(){return d(a)},!0)}return n.mutate(a);function l(p){var h=A.trans,y=p.keys||Aa(r,p);if(!y)throw new Error("Keys missing");return p=p.type==="add"||p.type==="put"?T(T({},p),{keys:y}):T({},p),p.type!=="delete"&&(p.values=Kt([],p.values,!0)),p.keys&&(p.keys=Kt([],p.keys,!0)),Ka(n,p,y).then(function(_){var w=y.map(function(m,g){var v=_[g],E={onerror:null,onsuccess:null};if(p.type==="delete")s.fire.call(E,m,v,h);else if(p.type==="add"||v===void 0){var S=c.fire.call(E,m,p.values[g],h);m==null&&S!=null&&(m=S,p.keys[g]=m,r.outbound||Z(p.values[g],r.keyPath,m))}else{var x=pn(v,p.values[g]),K=f.fire.call(E,x,m,v,h);if(K){var k=p.values[g];Object.keys(K).forEach(function(B){$(k,B)?k[B]=K[B]:Z(k,B,K[B])})}}return E});return n.mutate(p).then(function(m){for(var g=m.failures,v=m.results,E=m.numFailures,S=m.lastResult,x=0;x<y.length;++x){var K=v?v[x]:y[x],k=w[x];K==null?k.onerror&&k.onerror(g[x]):k.onsuccess&&k.onsuccess(p.type==="put"&&_[x]?p.values[x]:K)}return{failures:g,results:v,numFailures:E,lastResult:S}}).catch(function(m){return w.forEach(function(g){return g.onerror&&g.onerror(m)}),Promise.reject(m)})})}function d(p){return b(p.trans,p.range,1e4)}function b(p,h,y){return n.query({trans:p,values:!1,query:{index:r,range:h},limit:y}).then(function(_){var w=_.result;return l({type:"delete",keys:w,trans:p}).then(function(m){return m.numFailures>0?Promise.reject(m.failures[0]):w.length<y?{failures:[],numFailures:0,lastResult:void 0}:b(p,T(T({},h),{lower:w[w.length-1],lowerOpen:!0}),y)})})}}});return i}})}};function Ka(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function fr(t,e,n){try{if(!e||e.keys.length<t.length)return null;for(var r=[],i=0,a=0;i<e.keys.length&&a<t.length;++i)H(e.keys[i],t[a])===0&&(r.push(n?Ne(e.values[i]):e.values[i]),++a);return r.length===t.length?r:null}catch{return null}}var Da={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var n=t.table(e);return T(T({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=fr(r.keys,r.trans._cache,r.cache==="clone");return i?C.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Ne(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},vn;function yn(t){return!("from"in t)}var le=function(t,e){if(this)W(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var n=new le;return t&&"d"in t&&W(n,t),n}};De(le.prototype,(vn={add:function(t){return At(this,t),this},addKey:function(t){return tt(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(n){return tt(e,n,n)}),this}},vn[Tt]=function(){return mn(this)},vn));function tt(t,e,n){var r=H(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if(yn(t))return W(t,{from:e,to:n,d:1});var i=t.l,a=t.r;if(H(n,t.from)<0)return i?tt(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},hr(t);if(H(e,t.to)>0)return a?tt(a,e,n):t.r={from:e,to:n,d:1,l:null,r:null},hr(t);H(e,t.from)<0&&(t.from=e,t.l=null,t.d=a?a.d+1:1),H(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var o=!t.r;i&&!t.l&&At(t,i),a&&o&&At(t,a)}}function At(t,e){function n(r,i){var a=i.from,o=i.to,u=i.l,s=i.r;tt(r,a,o),u&&n(r,u),s&&n(r,s)}yn(e)||n(t,e)}function ka(t,e){var n=mn(e),r=n.next();if(r.done)return!1;for(var i=r.value,a=mn(t),o=a.next(i.from),u=o.value;!r.done&&!o.done;){if(H(u.from,i.to)<=0&&H(u.to,i.from)>=0)return!0;H(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(o=a.next(i.from)).value}return!1}function mn(t){var e=yn(t)?null:{s:0,n:t};return{next:function(n){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&H(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||H(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function hr(t){var e,n,r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",o=T({},t),u=t[i];t.from=u.from,t.to=u.to,t[i]=u[i],o[i]=u[a],t[a]=o,o.d=dr(o)}t.d=dr(t)}function dr(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}var Pa={stack:"dbcore",level:0,create:function(t){var e=t.schema.name,n=new le(t.MIN_KEY,t.MAX_KEY);return T(T({},t),{table:function(r){var i=t.table(r),a=i.schema,o=a.primaryKey,u=o.extractKey,s=o.outbound,c=T(T({},i),{mutate:function(d){var b=d.trans,p=b.mutatedParts||(b.mutatedParts={}),h=function(S){var x="idb://"+e+"/"+r+"/"+S;return p[x]||(p[x]=new le)},y=h(""),_=h(":dels"),w=d.type,m=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[],g=m[0],v=m[1],E=d.trans._cache;return i.mutate(d).then(function(S){if(z(g)){w!=="delete"&&(g=S.results),y.addKeys(g);var x=fr(g,E);!x&&w!=="add"&&_.addKeys(g),(x||v)&&Ta(h,a,x,v)}else if(g){var K={from:g.lower,to:g.upper};_.add(K),y.add(K)}else y.add(n),_.add(n),a.indexes.forEach(function(k){return h(k.name).add(n)});return S})}}),f=function(d){var b,p,h=d.query,y=h.index,_=h.range;return[y,new le((b=_.lower)!==null&&b!==void 0?b:t.MIN_KEY,(p=_.upper)!==null&&p!==void 0?p:t.MAX_KEY)]},l={get:function(d){return[o,new le(d.key)]},getMany:function(d){return[o,new le().addKeys(d.keys)]},count:f,query:f,openCursor:f};return L(l).forEach(function(d){c[d]=function(b){var p=A.subscr;if(p){var h=function(E){var S="idb://"+e+"/"+r+"/"+E;return p[S]||(p[S]=new le)},y=h(""),_=h(":dels"),w=l[d](b),m=w[0],g=w[1];if(h(m.name||"").add(g),!m.isPrimaryKey)if(d==="count")_.add(n);else{var v=d==="query"&&s&&b.values&&i.query(T(T({},b),{values:!1}));return i[d].apply(this,arguments).then(function(E){if(d==="query"){if(s&&b.values)return v.then(function(k){var B=k.result;return y.addKeys(B),E});var S=b.values?E.result.map(u):E.result;b.values?y.addKeys(S):_.addKeys(S)}else if(d==="openCursor"){var x=E,K=b.values;return x&&Object.create(x,{key:{get:function(){return _.addKey(x.primaryKey),x.key}},primaryKey:{get:function(){var k=x.primaryKey;return _.addKey(k),k}},value:{get:function(){return K&&y.addKey(x.primaryKey),x.value}}})}return E})}}return i[d].apply(this,arguments)}}),c}})}};function Ta(t,e,n,r){function i(a){var o=t(a.name||"");function u(c){return c!=null?a.extractKey(c):null}var s=function(c){return a.multiEntry&&z(c)?c.forEach(function(f){return o.addKey(f)}):o.addKey(c)};(n||r).forEach(function(c,f){var l=n&&u(n[f]),d=r&&u(r[f]);H(l,d)!==0&&(l!=null&&s(l),d!=null&&s(d))})}e.indexes.forEach(i)}var gn=function(){function t(e,n){var r=this;this._middlewares={},this.verno=0;var i=t.dependencies;this._options=n=T({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:M,dbReadyPromise:null,cancelOpen:M,openCanceller:null,autoSchema:!0};o.dbReadyPromise=new C(function(u){o.dbReadyResolve=u}),o.openCanceller=new C(function(u,s){o.cancelOpen=s}),this._state=o,this.name=e,this.on=Xe(this,"populate","blocked","versionchange","close",{ready:[Ot,M]}),this.on.ready.subscribe=Kn(this.on.ready.subscribe,function(u){return function(s,c){t.vip(function(){var f=r._state;if(f.openComplete)f.dbOpenError||C.resolve().then(s),c&&u(s);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(s),c&&u(s);else{u(s);var l=r;c||u(function d(){l.on.ready.unsubscribe(s),l.on.ready.unsubscribe(d)})}})}}),this.Collection=Hi(this),this.Table=Ni(this),this.Transaction=Zi(this),this.Version=va(this),this.WhereClause=qi(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=Ze(n.IDBKeyRange),this._createTransaction=function(u,s,c,f){return new r.Transaction(u,s,c,r._options.chromeTransactionDurability,f)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),Qe.filter(function(s){return s.name===r.name&&s!==r&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(u)})},this.use(Ca),this.use(Sa),this.use(Pa),this.use(Da),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(function(u){return u(r)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new D.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(i){return i._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(oa),r.stores({}),this._state.autoSchema=!1,r)},t.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||A.letThrough||this._vip)?e():new C(function(r,i){if(n._state.openComplete)return i(new D.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new D.DatabaseClosed);return}n.open().catch(M)}n._state.dbReadyPromise.then(r,i)}).then(e)},t.prototype.use=function(e){var n=e.stack,r=e.create,i=e.level,a=e.name;a&&this.unuse({stack:n,name:a});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i==null?10:i,name:a}),o.sort(function(u,s){return u.level-s.level}),this},t.prototype.unuse=function(e){var n=e.stack,r=e.name,i=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},t.prototype.open=function(){return _a(this)},t.prototype._close=function(){var e=this._state,n=Qe.indexOf(this);if(n>=0&&Qe.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new C(function(r){e.dbReadyResolve=r}),e.openCanceller=new C(function(r,i){e.cancelOpen=i})},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new D.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,n=arguments.length>0,r=this._state;return new C(function(i,a){var o=function(){e.close();var u=e._deps.indexedDB.deleteDatabase(e.name);u.onsuccess=j(function(){ga(e._deps,e.name),i()}),u.onerror=ie(a),u.onblocked=e._fireOnBlocked};if(n)throw new D.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return L(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=wa.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,n,r){var i=this,a=A.trans;(!a||a.db!==this||e.indexOf("!")!==-1)&&(a=null);var o=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(f){var l=f instanceof i.Table?f.name:f;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),e=="r"||e===$t)u=$t;else if(e=="rw"||e==qt)u=qt;else throw new D.InvalidArgument("Invalid transaction mode: "+e);if(a){if(a.mode===$t&&u===qt)if(o)a=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(f){if(a&&a.storeNames.indexOf(f)===-1)if(o)a=null;else throw new D.SubTransaction("Table "+f+" not included in parent transaction.")}),o&&a&&!a.active&&(a=null)}}catch(f){return a?a._promise(null,function(l,d){d(f)}):N(f)}var c=Ea.bind(null,this,u,s,a,r);return a?a._promise(u,c,"lock"):A.trans?Be(A.transless,function(){return i._whenReady(c)}):this._whenReady(c)},t.prototype.table=function(e){if(!$(this._allTables,e))throw new D.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),Ia=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Ra=function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,n,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:r}:e)},t.prototype[Ia]=function(){return this},t}();function pr(t,e){return L(e).forEach(function(n){var r=t[n]||(t[n]=new le);At(r,e[n])}),t}function Ba(t){return new Ra(function(e){var n=It(t);function r(b){n&&Re();var p=function(){return ye(t,{subscr:b,trans:null})},h=A.trans?Be(A.transless,p):p();return n&&h.then(se,se),h}var i=!1,a={},o={},u={get closed(){return i},unsubscribe:function(){i=!0,_e.storagemutated.unsubscribe(l)}};e.start&&e.start(u);var s=!1,c=!1;function f(){return L(o).some(function(b){return a[b]&&ka(a[b],o[b])})}var l=function(b){pr(a,b),f()&&d()},d=function(){if(!(s||i)){a={};var b={},p=r(b);c||(_e(Je,l),c=!0),s=!0,Promise.resolve(p).then(function(h){s=!1,!i&&(f()?d():(a={},o=b,e.next&&e.next(h)))},function(h){s=!1,e.error&&e.error(h),u.unsubscribe()})}};return d(),u})}var bn;try{bn={indexedDB:F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,IDBKeyRange:F.IDBKeyRange||F.webkitIDBKeyRange}}catch{bn={indexedDB:null,IDBKeyRange:null}}var Ke=gn;De(Ke,T(T({},at),{delete:function(t){var e=new Ke(t,{addons:[]});return e.delete()},exists:function(t){return new Ke(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return ya(Ke.dependencies).then(t)}catch{return N(new D.MissingAPI)}},defineClass:function(){function t(e){W(this,e)}return t},ignoreTransaction:function(t){return A.trans?Be(A.transless,t):t()},vip:hn,async:function(t){return function(){try{var e=dn(t.apply(this,arguments));return!e||typeof e.then!="function"?C.resolve(e):e}catch(n){return N(n)}}},spawn:function(t,e,n){try{var r=dn(t.apply(n,e||[]));return!r||typeof r.then!="function"?C.resolve(r):r}catch(i){return N(i)}},currentTransaction:{get:function(){return A.trans||null}},waitFor:function(t,e){var n=C.resolve(typeof t=="function"?Ke.ignoreTransaction(t):t).timeout(e||6e4);return A.trans?A.trans.waitFor(n):n},Promise:C,debug:{get:function(){return re},set:function(t){Rn(t,t==="dexie"?function(){return!0}:Zn)}},derive:ke,extend:W,props:De,override:Kn,Events:Xe,on:_e,liveQuery:Ba,extendObservabilitySet:pr,getByKeyPath:oe,setByKeyPath:Z,delByKeyPath:li,shallowClone:Pn,deepClone:Ne,getObjectDiff:pn,cmp:H,asap:Dn,minKey:Xt,addons:[],connections:Qe,errnames:gi,dependencies:bn,semVer:qn,version:qn.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,n*2)})}));Ke.maxKey=Ze(Ke.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(_e(Je,function(t){if(!fe){var e;mt?(e=document.createEvent("CustomEvent"),e.initCustomEvent(be,!0,!0,t)):e=new CustomEvent(be,{detail:t}),fe=!0,dispatchEvent(e),fe=!1}}),addEventListener(be,function(t){var e=t.detail;fe||St(e)}));function St(t){var e=fe;try{fe=!0,_e.storagemutated.fire(t)}finally{fe=e}}var fe=!1;if(typeof BroadcastChannel!="undefined"){var vr=new BroadcastChannel(be);_e(Je,function(t){fe||vr.postMessage(t)}),vr.onmessage=function(t){t.data&&St(t.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){_e(Je,function(t){try{fe||(typeof localStorage!="undefined"&&localStorage.setItem(be,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&Kt([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:be,changedParts:t})}))}catch{}}),addEventListener("storage",function(t){if(t.key===be){var e=JSON.parse(t.newValue);e&&St(e.changedParts)}});var yr=self.document&&navigator.serviceWorker;yr&&yr.addEventListener("message",Oa)}function Oa(t){var e=t.data;e&&e.type===be&&St(e.changedParts)}C.rejectionMapper=_i;Rn(re,Zn);class Ma extends gn{constructor(){super("db");En(this,"permission");this.version(1).stores({permission:"++id,action,subject"})}}const _n=new Ma,Wa=async t=>{if(!t||t.length===0)return;const e=t.map(i=>({action:i.action,subject:i.subject}));wn.update(e);const n=e.map(i=>Object.assign(i,{id:ai(5)}));return await _n.permission.bulkAdd(n)},Fa=async()=>await _n.permission.toArray(),Ha=async()=>{await _n.permission.clear()},wn=Sr(t=>t([])),ja=async()=>{const e=(await Fa()).map(n=>({action:n.action,subject:n.subject}));wn.update(e)},mr=Y.exports.createContext(null);Kr(mr.Consumer);const La=({children:t})=>(Y.exports.useEffect(()=>{ja()},[]),R(mr.Provider,{value:wn,children:t})),Na=new xn;Dr.render(R(kr.StrictMode,{children:R(La,{children:R(Pr,{FallbackComponent:Or,children:R(Tr,{children:R(Ir,{children:R(Cn,{client:Na,children:R(ii,{})})})})})})}),document.getElementById("root"));export{ni as L,Ua as T,ri as a,Ha as c,Wa as s};
